# DEFINE A IMAGEM BASE PARA A CRIAÇÃO DA IMAGEM PERSONALIZADA
FROM node:18.18.0

# CRIA UM DIRETÓRIO DE TRABALHO PARA A IMAGEM
WORKDIR /app

# COPIA OS ARQUIVOS PACKAGE.JSON E PACKAGE-LOCK.JSON, POR ISSO DO ASTERISCO
# FEITO PARA CRIAR UM CACHE SEPARADO DO CÓDIGO DA SRC, GARANTINDO QUE NOVAS 
# FEATURES FIQUEM DISPONÍVEIS NA IMAGEM
COPY ./package*.json ./

# INSTALA AS DEPENDÊNCIAS DO PROJETO NA IMAGEM
RUN npm install

# COPIA OS DEMAIS ARQUIVOS
COPY . .

# COMANDO EXECUTADO SOMENTE QUANDO O CONTAINER É EXECUTADO
CMD ["node", "server"]